# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –Ω–µ–≤–∑—è—Ç—ã—Ö –∑–∞–¥–∞—á–∞—Ö –≤ Planfix

## –û–ø–∏—Å–∞–Ω–∏–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ Planfix –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å HTTP POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–µ–±—Ö—É–∫ –±–æ—Ç–∞ –∫–∞–∂–¥—ã–π —á–∞—Å –¥–ª—è –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –≤–∑—è—Ç—ã –≤ —Ä–∞–±–æ—Ç—É. –ë–æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ Planfix

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Üí –°—Ü–µ–Ω–∞—Ä–∏–∏**
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å —É—Å–ª–æ–≤–∏—è–º–∏:
   - **–¢—Ä–∏–≥–≥–µ—Ä**: –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
   - **–£—Å–ª–æ–≤–∏–µ**: –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ = "–ù–æ–≤–∞—è" –ò –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –Ω–µ—Ç
   - **–î–µ–π—Å—Ç–≤–∏–µ**: –û—Ç–ø—Ä–∞–≤–∏—Ç—å HTTP –∑–∞–ø—Ä–æ—Å

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTP –∑–∞–ø—Ä–æ—Å:
   - **URL**: `http://crmbot.restme.pro/planfix/webhook`
   - **–ú–µ—Ç–æ–¥**: `POST`
   - **Content-Type**: `application/json`
   - **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: –°–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ

## –ü—Ä–∏–º–µ—Ä JSON –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è Planfix —Å—Ü–µ–Ω–∞—Ä–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å —Ä—É—Å—Å–∫–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ Planfix. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API Planfix:

```json
{
  "event": "task.reminder",
  "task": {
    "id": "{{–ó–∞–¥–∞—á–∞.–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä}}"
  }
}
```

**–í–∞–∂–Ω–æ**: –í Planfix –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:
- `{{–ó–∞–¥–∞—á–∞.–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä}}` - ID –∑–∞–¥–∞—á–∏ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
- `{{–ó–∞–¥–∞—á–∞.–ù–æ–º–µ—Ä}}` - –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ (–æ–±—â–∏–π –Ω–æ–º–µ—Ä, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

–ï—Å–ª–∏ Planfix –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö:

```json
{
  "event": "task.reminder",
  "task": {
    "id": "{{–ó–∞–¥–∞—á–∞.–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä}}",
    "status": {
      "id": "{{–ó–∞–¥–∞—á–∞.–°—Ç–∞—Ç—É—Å.–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä}}"
    },
    "assignees": {
      "users": "{{–ó–∞–¥–∞—á–∞.–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏}}"
    }
  }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API Planfix.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–í Planfix —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –ö–∞–∂–¥—ã–π —á–∞—Å (–∏–ª–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- **–£—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ –¥–ª—è –∑–∞–¥–∞—á —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤–∞—è" –∏ –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. Planfix —Å—Ü–µ–Ω–∞—Ä–∏–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–¥–∞—á–∏ –∫–∞–∂–¥—ã–π —á–∞—Å
2. –î–ª—è –∑–∞–¥–∞—á —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤–∞—è" –∏ –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è HTTP POST –∑–∞–ø—Ä–æ—Å
3. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤–µ–±—Ö—É–∫ —Å —Ç–∏–ø–æ–º —Å–æ–±—ã—Ç–∏—è `task.reminder`
4. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "–ù–æ–≤–∞—è" –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–π)
   - –ù–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –ù–∞–ª–∏—á–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –≤ Planfix
5. –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ –≤–∑—è—Ç–∞ –≤ —Ä–∞–±–æ—Ç—É, –±–æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `logs/bot.log`:
- `üîî Reminder for unassigned task {task_id} - resending notifications to executors` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- `Task {task_id} reminder skipped: task is already in progress` - –∑–∞–¥–∞—á–∞ —É–∂–µ –≤ —Ä–∞–±–æ—Ç–µ, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ
- `Task {task_id} reminder skipped: task has {count} active assignment(s)` - –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ

